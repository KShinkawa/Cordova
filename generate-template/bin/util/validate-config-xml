#! /usr/bin/env python
import os, sys
from xml.dom.minidom import parse

# worse is better?
def main():
    config = os.path.join(os.curdir, 'www', 'config.xml')
    # ensure the config.xml exists
    if os.path.exists(config):
        try:
            r = parse(config)
        except:
            sys.stderr.write('config.xml not well formed')
            exit(1)

        package = r.firstChild.attributes.get('id')
        name = r.getElementsByTagName('name').length
        if package is None or name is 0:
            sys.stderr.write('config.xml is missing name or id')
            exit(1)
    else:
        sys.stderr.write('config.xml not found')
        exit(1)

if __name__ == "__main__":
    main()
